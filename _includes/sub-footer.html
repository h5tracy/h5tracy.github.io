<script type="module">
import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
mermaid.initialize({ startOnLoad: false });

let elements = document.getElementsByClassName('language-mermaid');
for (int i = 0; i < elements.length; i++) {
  let oldElement = elements[i];
  const graphDefinition = oldElement.innerText;
  const { svg, bindFunctions } = await mermaid.render('graphDiv' + i, graphDefinition);
  let element = document.createElement('div');
  element.innerHTML = svg;
  bindFunctions?.(element);
  oldElement.replaceWith(element);
}
</script>
